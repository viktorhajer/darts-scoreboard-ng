{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/aroundclock/around-clock.component.ts","webpack:///src/app/aroundclock/around-clock.component.html","webpack:///src/app/aroundclock/around-clock.module.ts","webpack:///src/app/aroundclock/models/settings.model.ts","webpack:///src/app/aroundclock/models/state.model.ts","webpack:///src/app/components/menu/menu.component.ts","webpack:///src/app/components/menu/menu.component.html","webpack:///src/app/cricket/cricket.component.ts","webpack:///src/app/cricket/cricket.component.html","webpack:///src/app/cricket/cricket.module.ts","webpack:///src/app/cricket/models/settings.model.ts","webpack:///src/app/cricket/models/state.model.ts","webpack:///src/app/killer/killer.component.ts","webpack:///src/app/killer/killer.component.html","webpack:///src/app/killer/killer.module.ts","webpack:///src/app/killer/models/settings.model.ts","webpack:///src/app/killer/models/state.model.ts","webpack:///src/app/material.module.ts","webpack:///src/app/route-animation.ts","webpack:///src/app/shanghai/models/settings.model.ts","webpack:///src/app/shanghai/models/state.model.ts","webpack:///src/app/shanghai/shanghai.component.ts","webpack:///src/app/shanghai/shanghai.component.html","webpack:///src/app/shanghai/shanghai.module.ts","webpack:///src/app/shared/components/dialog/dialog.component.ts","webpack:///src/app/shared/components/dialog/dialog.component.html","webpack:///src/app/shared/components/game-toolbar/game-toolbar.component.ts","webpack:///src/app/shared/components/game-toolbar/game-toolbar.component.html","webpack:///src/app/shared/components/number-plate/number-plate.component.ts","webpack:///src/app/shared/components/number-plate/number-plate.component.html","webpack:///src/app/shared/components/player-score/player-score.component.ts","webpack:///src/app/shared/components/player-score/player-score.component.html","webpack:///src/app/shared/components/player-settings/player-settings.component.ts","webpack:///src/app/shared/components/player-settings/player-settings.component.html","webpack:///src/app/shared/components/settings/settings.component.ts","webpack:///src/app/shared/components/settings/settings.component.html","webpack:///src/app/shared/models/application-settings.model.ts","webpack:///src/app/shared/models/field-value.model.ts","webpack:///src/app/shared/models/player.model.ts","webpack:///src/app/shared/models/playground-state.model.ts","webpack:///src/app/shared/models/playground.model.ts","webpack:///src/app/shared/models/throw.model.ts","webpack:///src/app/shared/services/application-state.service.ts","webpack:///src/app/shared/services/dialog.service.ts","webpack:///src/app/shared/services/game.service.ts","webpack:///src/app/shared/shared.module.ts","webpack:///src/app/x01/models/settings.model.ts","webpack:///src/app/x01/x01.component.ts","webpack:///src/app/x01/x01.component.html","webpack:///src/app/x01/x01.module.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","path","component","data","name","loadChildren","redirectTo","AppComponent","applicationStateService","document","addEventListener","event","scale","preventDefault","passive","selector","templateUrl","styleUrls","animations","AppModule","forRoot","imports","declarations","bootstrap","settings","game","AroundClockComponent","application","route","dialogService","players","forEach","player","state","score","getActualPlayer","field","getPlayerState","getActFieldIndex","actFieldIndex","multiplier","increaseActFieldIndex","jump","win","actualThrow","punishment","multi","i","t","throwsHistory","length","fieldNum","decreaseActFieldIndex","nextPlayer","fieldStr","indexOf","isFieldEnabledToThrow","ret","filter","p","some","owners","map","join","AroundClockModule","forChild","Settings","AroundClockState","value","MenuComponent","r","CricketComponent","fields","updateField","getPlayerTotal","punishStyle","isPunishGame","isBlackOutGame","isPlayerDone","isTheBestPlayer","isTheWorstPlayer","getPunishScore","playerFieldCount","getFieldCount","str","isNoScoreGame","getFieldScore","isFieldDoneForPlayer","isFieldClosed","isHighlighted","padStart","total","getPlayerTotalForPunishGame","isScoreGame","getPlayerTotalForScoreGame","getFieldValueAsNumber","getPunishCount","isFieldClosedForOthers","setFieldCount","punishPlayers","setPunishCount","closed","done","CricketModule","numbs","style","defaultSet","initFields","Math","floor","random","setAllowedField","numbers","push","f","CricketState","fieldCount","punishCount","getFieldValue","fv","clone","KillerComponent","nextEnabled","zeroEnabled","multiEnabled","numberOfLives","boardingLimit","isInactive","round","actField","isActualPlayerTheLast","killer","life","Number","s","boarding","actualPlayer","getAllEnabledFields","isSecondHighlighted","owner","find","KillerModule","KillerState","materialImports","MaterialModule","slideInAnimation","position","top","left","width","optional","noScore","halveIt","rand","ShanghaiState","fieldScore","ShanghaiComponent","isActiveField","increaseFieldCount","increaseFieldScore","getPreviousField","extraEndingMsg","gameEnded","isTheLastThrow","console","log","ShanghaiModule","DialogComponent","dialogRef","close","GameToolbarComponent","navigate","playground","resetScore","reset","settingsOpen","quit","showSettings","NumberPlateComponent","getNumberColor","throwNumber","PlayerScoreComponent","hasContent","scoreDisplayed","encapsulation","None","PlayerSettingsComponent","storedPlayers","getStoredPlayers","o","SettingsComponent","ApplicationSettings","darkTheme","FieldValue","Player","throws","first","reduce","a","b","thr","PlaygroundState","list","filtered","FIELDS","FIELDS_COUNT","MAXIMUM_NUMBER_OF_PLAYERS","Playground","minimumNumberOfPlayers","throwEnabled","save","addThrowHistory","calculatePoints","checkPlayerState","winners","victoryFirst","openDialog","newGame","rotate","playerSettingsValidation","customSettingsValidation","openErrorDialog","rotatePlayers","trim","storePlayer","gameHistory","customReset","pop","actThrow","skip","parseInt","Throw","order","APPLICATION_KEY","PLAYER_KEY","ApplicationStateService","localStorage","getItem","JSON","parse","setTheme","saveSettings","body","classList","add","className","replace","setItem","stringify","v","providedIn","DialogService","dialog","title","content","open","panelClass","GameService","actualPlayerIndex","nextRound","getNumberOfPlayers","getTheFirstPlayer","isTheFirstPlayer","getTheLastPlayer","isTheLastPlayer","actPlayer","bestPlayer","lastPlayer","shift","components","SharedModule","entryComponents","startValue","start","checkout","X01Component","actualScore","validStart","isNormalStart","isDoubleStart","isTripleStart","countDown","next","isHighScoreGame","isNormalCheckout","isDoubleCheckout","isTripleCheckout","setInterval","clearInterval","X01Module","environment","production","bootstrapModule","catch","err","error"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import {Routes} from '@angular/router';\r\nimport {MenuComponent} from './components/menu/menu.component';\r\nimport {X01Module} from './x01/x01.module';\r\nimport {CricketModule} from './cricket/cricket.module';\r\nimport {AroundClockModule} from './aroundclock/around-clock.module';\r\nimport {ShanghaiModule} from './shanghai/shanghai.module';\r\nimport {KillerModule} from './killer/killer.module';\r\n\r\nexport const routes: Routes = [\r\n  {path: '', component: MenuComponent},\r\n  {\r\n    path: 'x01',\r\n    data: {name: 'Classic X01'},\r\n    loadChildren: () => X01Module\r\n  },\r\n  {\r\n    path: 'cricket',\r\n    data: {name: 'Ultimate Cricket'},\r\n    loadChildren: () => CricketModule\r\n  },\r\n  {\r\n    path: 'around-clock',\r\n    data: {name: 'Around The Clock'},\r\n    loadChildren: () => AroundClockModule\r\n  },\r\n  {\r\n    path: 'shanghai',\r\n    data: {name: 'Shanghai / Halve It'},\r\n    loadChildren: () => ShanghaiModule\r\n  },\r\n  {\r\n    path: 'killer',\r\n    data: {name: 'Killer'},\r\n    loadChildren: () => KillerModule\r\n  },\r\n  {\r\n    path: '**', redirectTo: ''\r\n  }\r\n];\r\n","import {Component} from '@angular/core';\r\nimport {slideInAnimation} from './route-animation';\r\nimport {ApplicationStateService} from '~services/application-state.service';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: 'app.component.html',\r\n  styleUrls: ['./app.component.scss'],\r\n  animations: [slideInAnimation]\r\n})\r\nexport class AppComponent {\r\n\r\n  constructor(public applicationStateService: ApplicationStateService) {\r\n    document.addEventListener('touchmove',  (event: any) => {\r\n      if (event.scale !== 1) { event.preventDefault(); }\r\n    }, { passive: false });\r\n  }\r\n}\r\n","<div [@routeAnimations]=\"outlet && outlet.isActivated && outlet.activatedRoute\">\r\n  <router-outlet #outlet=\"outlet\"></router-outlet>\r\n</div>\r\n<div class=\"theme-chooser\">\r\n  <button mat-icon-button (click)=\"applicationStateService.toggleDarkTheme()\" color=\"primary\"><mat-icon>brightness_1</mat-icon></button>\r\n</div>\r\n","import {AppComponent} from './app.component';\r\nimport {BrowserModule} from '@angular/platform-browser';\r\nimport {NgModule} from '@angular/core';\r\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\r\nimport {MenuComponent} from './components/menu/menu.component';\r\nimport {SharedModule} from './shared/shared.module';\r\nimport {RouterModule} from '@angular/router';\r\nimport {routes} from './app-routing';\r\n\r\n@NgModule({\r\n  imports: [\r\n    BrowserModule, BrowserAnimationsModule, RouterModule.forRoot(routes), SharedModule\r\n  ],\r\n  declarations: [AppComponent, MenuComponent],\r\n  exports: [RouterModule],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule {\r\n}\r\n","import {Component} from '@angular/core';\r\nimport {AroundClockState} from './models/state.model';\r\nimport {Settings} from './models/settings.model';\r\nimport {FIELDS, FIELDS_COUNT, Playground} from '~models/playground.model';\r\nimport {GameService} from '~services/game.service';\r\nimport {Player} from '~models/player.model';\r\nimport {Router} from '@angular/router';\r\nimport {DialogService} from '~services/dialog.service';\r\nimport {slideInAnimation} from '../route-animation';\r\nimport {ApplicationStateService} from '~services/application-state.service';\r\n\r\n@Component({\r\n  templateUrl: './around-clock.component.html',\r\n  animations: [slideInAnimation],\r\n})\r\nexport class AroundClockComponent extends Playground<AroundClockState> {\r\n\r\n  settings: Settings;\r\n\r\n  constructor(application: ApplicationStateService, game: GameService, route: Router, dialogService: DialogService) {\r\n    super(application, game, route, dialogService);\r\n    this.settings = new Settings();\r\n  }\r\n\r\n  customReset() {\r\n    this.game.players.forEach(player => player.state = new AroundClockState());\r\n  }\r\n\r\n  calculatePoints(score: number): Promise<any> {\r\n    const player = this.game.getActualPlayer();\r\n    const field = score === 25 ? 'B' : (score + '');\r\n    const state: AroundClockState = this.getPlayerState(player);\r\n    if (FIELDS[state.getActFieldIndex()] === field) {\r\n      // last throw\r\n      if (state.actFieldIndex >= FIELDS_COUNT - this.multiplier) {\r\n        this.multiplier = this.multiplier === 1 ? 1 : FIELDS_COUNT - (state.actFieldIndex + 1);\r\n      }\r\n      state.increaseActFieldIndex(this.settings.jump ? this.multiplier : 1);\r\n      if (state.actFieldIndex >= FIELDS_COUNT) {\r\n        state.actFieldIndex = FIELDS_COUNT;\r\n      }\r\n    }\r\n    player.score++;\r\n    return Promise.resolve();\r\n  }\r\n\r\n  checkPlayerState(): Promise<any> {\r\n    const player = this.game.getActualPlayer();\r\n    if ((FIELDS_COUNT - 1) < this.getPlayerState(player).getActFieldIndex()) {\r\n      player.win = true;\r\n    } else if (this.game.actualThrow === 3) {\r\n      if (this.settings.punishment) {\r\n        let multi = 0;\r\n        for (let i = 0; i < 3; i++) {\r\n          const t = player.throwsHistory[player.throwsHistory.length - i - 1];\r\n          multi += t.fieldNum;\r\n        }\r\n        if (multi === 0) {\r\n          this.getPlayerState(player).decreaseActFieldIndex();\r\n        }\r\n      }\r\n      this.game.nextPlayer();\r\n    }\r\n    return Promise.resolve();\r\n  }\r\n\r\n  isFieldEnabledToThrow(field: number): boolean {\r\n    let fieldStr = field + '';\r\n    if (field === 25) {\r\n      fieldStr = 'B';\r\n    }\r\n    return FIELDS.indexOf(fieldStr) === this.getPlayerState(this.game.getActualPlayer()).getActFieldIndex();\r\n  }\r\n\r\n  isHighlighted(field: number): boolean {\r\n    return this.isFieldEnabledToThrow(field);\r\n  }\r\n\r\n  isSecondHighlighted(field: number): boolean {\r\n    let ret = false;\r\n    if (!this.isFieldEnabledToThrow(field)) {\r\n      let fieldStr = field + '';\r\n      if (field === 25) {\r\n        fieldStr = 'B';\r\n      }\r\n      ret = this.game.players.filter(p => p !== this.game.getActualPlayer())\r\n        .some(p => FIELDS.indexOf(fieldStr) === this.getPlayerState(p).getActFieldIndex());\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  getActualField(player: Player): string {\r\n    return FIELDS[this.getPlayerState(player).getActFieldIndex()];\r\n  }\r\n\r\n  isLastRound(): boolean {\r\n    return false;\r\n  }\r\n\r\n  getFieldNote(field: number): string {\r\n    field = field === 25 ? 20 : field - 1;\r\n    const owners = this.game.players.filter(p => (<AroundClockState>p.state).actFieldIndex === field).map(p => p.name);\r\n    return !!owners.length ? owners.join(' ') : '';\r\n  }\r\n}\r\n","<div id=\"playgroundContent\">\r\n\r\n  <app-settings *ngIf=\"settingsOpen\" [title]=\"'Around The Clock'\" [playground]=\"playground\">\r\n    <h2>Games</h2>\r\n    <button mat-raised-button class=\"button medium\" [color]=\"settings.jump?'primary':''\" (click)=\"settings.toggleJump()\">\r\n      Enable Jump\r\n    </button>\r\n    <button mat-raised-button class=\"button medium\" [color]=\"game.victoryFirst?'primary':''\" (click)=\"game.toggleVictoryFirst()\">\r\n      Victory First\r\n    </button>\r\n    <button mat-raised-button class=\"button medium\" [color]=\"settings.punishment?'primary':''\" (click)=\"settings.togglePunishment()\">\r\n      Enable Punishment\r\n    </button>\r\n  </app-settings>\r\n\r\n  <div class=\"side-left\">\r\n    <app-game-toolbar [playground]=\"playground\" *ngIf=\"!settingsOpen\"></app-game-toolbar>\r\n    <ng-container *ngIf=\"!settingsOpen\">\r\n      <div class=\"player {{(i === game.actualPlayerIndex) ? 'highlighted' : ''}}\"\r\n           *ngFor=\"let player of game.players; let i = index\">\r\n        <app-player-score [player]=\"player\" [scoreDisplayed]=\"false\" [hasContent]=\"false\"></app-player-score>\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n  <app-number-plate [playground]=\"playground\" *ngIf=\"!settingsOpen\"></app-number-plate>\r\n\r\n</div>\r\n","import {NgModule} from '@angular/core';\r\nimport {RouterModule} from '@angular/router';\r\nimport {AroundClockComponent} from './around-clock.component';\r\nimport {SharedModule} from '../shared/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    RouterModule.forChild([\r\n      {path: '', component: AroundClockComponent}\r\n    ])\r\n  ],\r\n  declarations: [AroundClockComponent]\r\n})\r\nexport class AroundClockModule {\r\n}\r\n","export class Settings {\r\n  jump: boolean;\r\n  punishment: boolean;\r\n\r\n  constructor() {\r\n    this.jump = true;\r\n    this.punishment = false;\r\n  }\r\n\r\n  toggleJump() {\r\n    this.jump = !this.jump;\r\n  }\r\n\r\n  togglePunishment() {\r\n    this.punishment = !this.punishment;\r\n  }\r\n}\r\n","import {PlaygroundState} from '~models/playground-state.model';\r\n\r\nexport class AroundClockState extends PlaygroundState {\r\n\r\n  actFieldIndex: number;\r\n\r\n  constructor() {\r\n    super();\r\n    this.actFieldIndex = 0;\r\n  }\r\n\r\n  getActFieldIndex(): number {\r\n    return this.actFieldIndex;\r\n  }\r\n\r\n  increaseActFieldIndex(value?: number) {\r\n    this.actFieldIndex += value ? value : 1;\r\n  }\r\n\r\n  decreaseActFieldIndex() {\r\n    this.actFieldIndex--;\r\n    if (this.actFieldIndex < 0) {\r\n      this.actFieldIndex = 0;\r\n    }\r\n  }\r\n\r\n  clone(): AroundClockState {\r\n    const state: AroundClockState = new AroundClockState();\r\n    state.actFieldIndex = this.actFieldIndex;\r\n    return state;\r\n  }\r\n}\r\n","import {Component} from '@angular/core';\r\nimport {Routes} from '@angular/router';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: 'x01',\r\n    data: {name: 'Classic X01'}\r\n  },\r\n  {\r\n    path: 'cricket',\r\n    data: {name: 'Ultimate Cricket'}\r\n  },\r\n  {\r\n    path: 'around-clock',\r\n    data: {name: 'Around The Clock'}\r\n  },\r\n  {\r\n    path: 'shanghai',\r\n    data: {name: 'Shanghai / Halve It'}\r\n  },\r\n  {\r\n    path: 'killer',\r\n    data: {name: 'Killer'}\r\n  }\r\n];\r\n\r\n\r\n@Component({\r\n  templateUrl: './menu.component.html',\r\n  styleUrls: ['./menu.component.scss']\r\n})\r\nexport class MenuComponent {\r\n\r\n  getGameList(): Routes {\r\n    return routes.filter(r => !!r.data);\r\n  }\r\n}\r\n","<div id=\"menu\">\r\n  <h1>Select Game!</h1>\r\n  <button mat-raised-button class=\"gameSelectBox\" *ngFor=\"let g of getGameList()\"  [routerLink]=\"['/' + g.path]\">\r\n    {{g.data.name}}\r\n  </button>\r\n</div>","import {Component} from '@angular/core';\r\nimport {CricketState} from './models/state.model';\r\nimport {Settings} from './models/settings.model';\r\nimport {Playground} from '~models/playground.model';\r\nimport {GameService} from '~services/game.service';\r\nimport {Player} from '~models/player.model';\r\nimport {Router} from '@angular/router';\r\nimport {DialogService} from '~services/dialog.service';\r\nimport {slideInAnimation} from '../route-animation';\r\nimport {ApplicationStateService} from '~services/application-state.service';\r\n\r\n@Component({\r\n  templateUrl: './cricket.component.html',\r\n  animations: [slideInAnimation],\r\n})\r\nexport class CricketComponent extends Playground<CricketState> {\r\n\r\n  settings: Settings;\r\n\r\n  constructor(application: ApplicationStateService, game: GameService, route: Router, dialogService: DialogService) {\r\n    super(application, game, route, dialogService);\r\n    this.settings = new Settings();\r\n  }\r\n\r\n  customReset() {\r\n    this.game.players.forEach(player => player.state = new CricketState());\r\n  }\r\n\r\n  customSettingsValidation(): boolean {\r\n    return this.settings.fields.length > 0;\r\n  }\r\n\r\n  calculatePoints(score: number): Promise<any> {\r\n    const player = this.game.getActualPlayer();\r\n    this.updateField(player, score);\r\n    return Promise.resolve();\r\n  }\r\n\r\n  checkPlayerState(): Promise<any> {\r\n    const player = this.game.getActualPlayer();\r\n\r\n    this.game.players.forEach(p => {\r\n      p.score = this.getPlayerTotal(p);\r\n    }, this);\r\n\r\n    const punishStyle = this.settings.isPunishGame() || this.settings.isBlackOutGame();\r\n    player.win = this.isPlayerDone(player)\r\n      && ((!punishStyle && this.game.isTheBestPlayer(player)) || (punishStyle && this.game.isTheWorstPlayer(player)));\r\n\r\n    if (this.game.actualThrow === 3) {\r\n      this.game.nextPlayer();\r\n    }\r\n    return Promise.resolve();\r\n  }\r\n\r\n  getFieldValue(player: Player, field: string): string {\r\n    const score = this.getPunishScore(player, field);\r\n    const punishStyle = this.settings.isPunishGame() || this.settings.isBlackOutGame();\r\n    const playerFieldCount = this.getPlayerState(player).getFieldCount(field);\r\n\r\n    let str = '';\r\n    if (punishStyle && score !== 0) {\r\n      str += score;\r\n    }\r\n\r\n    if (playerFieldCount === 0 && str.length === 0) {\r\n      return '';\r\n    } else if (playerFieldCount > 3 && !punishStyle && !this.settings.isNoScoreGame()) {\r\n      return this.getFieldScore(player, field) + '';\r\n    } else if (playerFieldCount === 3 || ((punishStyle || this.settings.isNoScoreGame()) && playerFieldCount > 3)) {\r\n      str += '';\r\n    } else {\r\n      for (let i = 0; i < playerFieldCount; i++) {\r\n        str += '';\r\n      }\r\n    }\r\n    return str;\r\n  }\r\n\r\n  isFieldDoneForPlayer(player: Player, field: string): boolean {\r\n    return this.getPlayerState(player).getFieldCount(field) >= 3;\r\n  }\r\n\r\n  isActiveField(player: Player, field: string): boolean {\r\n    return this.settings.fields[this.getPlayerState(player).getActFieldIndex()] === field;\r\n  }\r\n\r\n  isFieldEnabledToThrow(field: number): boolean {\r\n    let fieldStr = field + '';\r\n    if (field === 25) {\r\n      fieldStr = 'B';\r\n    }\r\n    if (this.settings.isNoScoreGame()) {\r\n      return this.settings.fields.indexOf(fieldStr) !== -1 && !this.isFieldDoneForPlayer(this.game.getActualPlayer(), fieldStr);\r\n    }\r\n\r\n    return this.settings.fields.indexOf(fieldStr) !== -1 && !this.isFieldClosed(fieldStr);\r\n  }\r\n\r\n  isHighlighted(field: number): boolean {\r\n    return this.isFieldEnabledToThrow(field) &&\r\n      !this.isFieldDoneForPlayer(this.game.getActualPlayer(), field === 25 ? 'B' : field + '');\r\n  }\r\n\r\n  isSecondHighlighted(field: number): boolean {\r\n    return this.isFieldEnabledToThrow(field) &&\r\n      this.isFieldDoneForPlayer(this.game.getActualPlayer(), field === 25 ? 'B' : field + '');\r\n  }\r\n\r\n  getFieldNote(field: number): string {\r\n    if (this.isHighlighted(field)) {\r\n      const playerFieldCount = this.getPlayerState(this.game.getActualPlayer()).getFieldCount(field === 25 ? 'B' : field + '');\r\n      return ''.padStart(3 - playerFieldCount, '');\r\n    }\r\n    return '';\r\n  }\r\n\r\n  private getPlayerTotal(player: Player) {\r\n    let total = 0;\r\n    if (this.settings.isPunishGame() || this.settings.isBlackOutGame()) {\r\n      total = this.getPlayerTotalForPunishGame(player);\r\n    } else if (this.settings.isScoreGame()) {\r\n      total = this.getPlayerTotalForScoreGame(player);\r\n    }\r\n    return total;\r\n  }\r\n\r\n  private getPlayerTotalForScoreGame(player: Player) {\r\n    let total = 0;\r\n    this.settings.fields.forEach(field => {\r\n      if (this.isFieldDoneForPlayer(player, field)) {\r\n        total += (this.getPlayerState(player).getFieldCount(field) - 3) * Playground.getFieldValueAsNumber(field);\r\n      }\r\n    }, this);\r\n    return total;\r\n  }\r\n\r\n  private getPlayerTotalForPunishGame(player: Player) {\r\n    let total = 0;\r\n    this.settings.fields.forEach(field => {\r\n      total += this.getPlayerState(player).getPunishCount(field) * Playground.getFieldValueAsNumber(field);\r\n    }, this);\r\n    return total;\r\n  }\r\n\r\n  private updateField(player: Player, score: number) {\r\n    const field = score === 25 ? 'B' : (score + '');\r\n\r\n    if (this.settings.fields.indexOf(field) !== -1 && !this.isFieldClosed(field)) {\r\n      const playerFieldCount = this.getPlayerState(player).getFieldCount(field);\r\n      if (!this.settings.isBlackOutGame() ||\r\n        this.settings.fields[this.getPlayerState(player).getActFieldIndex()] === field ||\r\n        this.isFieldDoneForPlayer(player, field)) {\r\n\r\n        if (this.isFieldClosedForOthers(player, field) && (playerFieldCount + this.multiplier) > 3) {\r\n          this.getPlayerState(player).setFieldCount(field, 3);\r\n        } else {\r\n          let multiplier = this.multiplier + 0;\r\n          if (playerFieldCount < 3 && (playerFieldCount + this.multiplier) >= 3) {\r\n            multiplier = (playerFieldCount + this.multiplier) % 3;\r\n          }\r\n          this.getPlayerState(player).setFieldCount(field, playerFieldCount + this.multiplier);\r\n          this.multiplier = multiplier;\r\n        }\r\n      }\r\n\r\n      if (this.isFieldDoneForPlayer(player, field)) {\r\n        if (this.settings.isBlackOutGame()) {\r\n          if (this.settings.fields[this.getPlayerState(player).getActFieldIndex()] === field) {\r\n            this.getPlayerState(player).increaseActFieldIndex();\r\n          }\r\n        }\r\n        this.punishPlayers(field);\r\n      }\r\n    }\r\n  }\r\n\r\n  private punishPlayers(field: string) {\r\n    this.game.players.forEach(player => {\r\n      if (!this.isFieldDoneForPlayer(player, field)) {\r\n        this.getPlayerState(player).setPunishCount(field, this.getPlayerState(player).getPunishCount(field) + this.multiplier);\r\n      }\r\n    }, this);\r\n  }\r\n\r\n  private getFieldScore(player: Player, field: string): number {\r\n    if (this.isFieldDoneForPlayer(player, field)) {\r\n      return (this.getPlayerState(player).getFieldCount(field) - 3) * Playground.getFieldValueAsNumber(field);\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  private getPunishScore(player: Player, field: string): number {\r\n    return this.getPlayerState(player).getPunishCount(field) * Playground.getFieldValueAsNumber(field);\r\n  }\r\n\r\n  private isFieldClosed(field: string): boolean {\r\n    let closed = true;\r\n    this.game.players.forEach(player => {\r\n      closed = closed && this.isFieldDoneForPlayer(player, field);\r\n    }, this);\r\n    return closed;\r\n  }\r\n\r\n  private isFieldClosedForOthers(player: Player, field: string): boolean {\r\n    let closed = true;\r\n    this.game.players.forEach(p => {\r\n      if (p.id !== player.id) {\r\n        closed = closed && this.isFieldDoneForPlayer(p, field);\r\n      }\r\n    }, this);\r\n    return closed;\r\n  }\r\n\r\n  private isPlayerDone(player: Player): boolean {\r\n    let done = true;\r\n    this.settings.fields.forEach(field => {\r\n      done = done && this.isFieldDoneForPlayer(player, field);\r\n    });\r\n    return done;\r\n  }\r\n}\r\n","<div id=\"playgroundContent\">\r\n\r\n  <app-settings *ngIf=\"settingsOpen\" [title]=\"'Ultimate Cricket'\" [playground]=\"playground\">\r\n    <h2>Fields</h2>\r\n    <button mat-raised-button class=\"button\" [color]=\"settings.isFieldAllowed(i)?'primary':''\"\r\n            *ngFor=\"let numb of settings.getNumbers(); let i = index\" (click)=\"settings.setNumber(i)\">\r\n      {{numb === 21 ? 'B' : numb}}\r\n    </button>\r\n    <mat-divider></mat-divider>\r\n\r\n    <button mat-raised-button class=\"button shortmedium\" (click)=\"settings.upper()\">Upper</button>\r\n    <button mat-raised-button class=\"button shortmedium\" (click)=\"settings.lower()\">Lower</button>\r\n    <button mat-raised-button class=\"button shortmedium\" (click)=\"settings.odd()\">Odd</button>\r\n    <button mat-raised-button class=\"button shortmedium\" (click)=\"settings.even()\">Even</button>\r\n    <button mat-raised-button class=\"button shortmedium\" (click)=\"settings.randomize()\">Random</button>\r\n    <mat-divider></mat-divider>\r\n\r\n    <h2>Style</h2>\r\n    <button mat-raised-button class=\"button shortmedium\" [color]=\"settings.style==1?'primary':''\"\r\n            (click)=\"settings.setStyle(1)\">Classic\r\n    </button>\r\n    <button mat-raised-button class=\"button shortmedium\" [color]=\"settings.style==2?'primary':''\"\r\n            (click)=\"settings.setStyle(2)\">Cut-Throat\r\n    </button>\r\n    <button mat-raised-button class=\"button shortmedium\" [color]=\"settings.style==3?'primary':''\"\r\n            (click)=\"settings.setStyle(3)\">No Score\r\n    </button>\r\n    <button mat-raised-button class=\"button shortmedium\" [color]=\"settings.style==4?'primary':''\"\r\n            (click)=\"settings.setStyle(4)\">Black Out\r\n    </button>\r\n    <button mat-raised-button class=\"button shortmedium\" [color]=\"game.victoryFirst?'primary':''\" (click)=\"game.toggleVictoryFirst()\">\r\n      Victory First\r\n    </button>\r\n  </app-settings>\r\n\r\n  <div class=\"side-left\">\r\n\r\n    <app-game-toolbar [playground]=\"playground\" *ngIf=\"!settingsOpen\"></app-game-toolbar>\r\n\r\n    <ng-container *ngIf=\"!settingsOpen\">\r\n      <div class=\"player {{(i === game.actualPlayerIndex) ? 'highlighted' : ''}}\"\r\n           *ngFor=\"let player of game.players; let i = index\">\r\n        <app-player-score [player]=\"player\">\r\n          <div class=\"field-set\">\r\n            <div\r\n                class=\"field {{isActiveField(player, field) && settings.isBlackOutGame()  ? 'active': ''}} {{!isFieldDoneForPlayer(player, field) ? 'highlighted' : ''}}\"\r\n                *ngFor=\"let field of settings.fields\">\r\n              {{field}}: <span class=\"small\">{{ getFieldValue(player, field) }}</span>\r\n            </div>\r\n          </div>\r\n        </app-player-score>\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n  <app-number-plate [playground]=\"playground\" *ngIf=\"!settingsOpen\"></app-number-plate>\r\n</div>\r\n","import {NgModule} from '@angular/core';\r\nimport {RouterModule} from '@angular/router';\r\nimport {CricketComponent} from './cricket.component';\r\nimport {SharedModule} from '../shared/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    RouterModule.forChild([\r\n      {path: '', component: CricketComponent}\r\n    ])\r\n  ],\r\n  declarations: [CricketComponent]\r\n})\r\nexport class CricketModule {\r\n}\r\n","export class Settings {\r\n\r\n  fields: string[] = ['15', '16', '17', '18', '19', '20', 'B'];\r\n  numbs: boolean[] = [];\r\n  style: number;\r\n\r\n  constructor() {\r\n    this.style = 2;\r\n    let defaultSet = false;\r\n    for (let i = 0; i < 21; i++) {\r\n      this.numbs[i] = defaultSet;\r\n      if (i === 13) {\r\n        defaultSet = true;\r\n      }\r\n    }\r\n    this.initFields();\r\n  }\r\n\r\n  randomize() {\r\n    for (let i = 0; i < this.numbs.length; i++) {\r\n      this.numbs[i] = false;\r\n    }\r\n    for (let i = 0; i < 7; i++) {\r\n      this.numbs[Math.floor(Math.random() * 21)] = true;\r\n    }\r\n    this.initFields();\r\n  }\r\n\r\n  upper() {\r\n    this.setAllowedField([14, 9, 12, 5, 20, 1, 18, 4, 13, 21]);\r\n  }\r\n\r\n  lower() {\r\n    this.setAllowedField([10, 15, 2, 17, 3, 19, 7, 16, 8, 21]);\r\n  }\r\n\r\n  odd() {\r\n    this.setAllowedField([1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21]);\r\n  }\r\n\r\n  even() {\r\n    this.setAllowedField([2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 21]);\r\n  }\r\n\r\n  getNumbers(): number[] {\r\n    const numbers: number[] = [];\r\n    for (let i = 0; i < 21; i++) {\r\n      numbers[i] = (i + 1);\r\n    }\r\n    return numbers;\r\n  }\r\n\r\n  isFieldAllowed(field: number): boolean {\r\n    return !!this.numbs[field];\r\n  }\r\n\r\n  setNumber(i: number) {\r\n    this.numbs[i] = !this.numbs[i];\r\n    this.initFields();\r\n  }\r\n\r\n  setStyle(style: number) {\r\n    this.style = style;\r\n  }\r\n\r\n  initFields() {\r\n    this.fields = [];\r\n    for (let i = 0; i < 21; i++) {\r\n      if (this.numbs[i]) {\r\n        this.fields.push(i === 20 ? 'B' : ((i + 1) + ''));\r\n      }\r\n    }\r\n  }\r\n\r\n  isScoreGame(): boolean {\r\n    return this.style === 1;\r\n  }\r\n\r\n  isPunishGame(): boolean {\r\n    return this.style === 2;\r\n  }\r\n\r\n  isNoScoreGame(): boolean {\r\n    return this.style === 3;\r\n  }\r\n\r\n  isBlackOutGame(): boolean {\r\n    return this.style === 4;\r\n  }\r\n\r\n  private setAllowedField(fields: number[]) {\r\n    for (let i = 0; i < this.numbs.length; i++) {\r\n      this.numbs[i] = false;\r\n    }\r\n    fields.forEach(f => this.numbs[f - 1] = true);\r\n    this.initFields();\r\n  }\r\n}\r\n","import {PlaygroundState} from '~models/playground-state.model';\r\nimport {FieldValue} from '~models/field-value.model';\r\n\r\nexport class CricketState extends PlaygroundState {\r\n\r\n  fieldCount: FieldValue[];\r\n  punishCount: FieldValue[];\r\n  actFieldIndex: number;\r\n\r\n  constructor() {\r\n    super();\r\n    this.fieldCount = [];\r\n    this.punishCount = [];\r\n    this.actFieldIndex = 0;\r\n  }\r\n\r\n  getFieldCount(field: string): number {\r\n    return this.getFieldValue(this.fieldCount, field).value;\r\n  }\r\n\r\n  setFieldCount(field: string, value: number) {\r\n    this.getFieldValue(this.fieldCount, field).value = value;\r\n  }\r\n\r\n  getPunishCount(field: string): number {\r\n    return this.getFieldValue(this.punishCount, field).value;\r\n  }\r\n\r\n  setPunishCount(field: string, value: number) {\r\n    this.getFieldValue(this.punishCount, field).value = value;\r\n  }\r\n\r\n  getActFieldIndex(): number {\r\n    return this.actFieldIndex;\r\n  }\r\n\r\n  increaseActFieldIndex() {\r\n    this.actFieldIndex++;\r\n  }\r\n\r\n  clone(): CricketState {\r\n    const state: CricketState = new CricketState();\r\n    state.actFieldIndex = this.actFieldIndex;\r\n    this.fieldCount.forEach(fv => state.fieldCount.push(fv.clone()));\r\n    this.punishCount.forEach(fv => state.punishCount.push(fv.clone()));\r\n    return state;\r\n  }\r\n}\r\n","import {Component} from '@angular/core';\r\nimport {KillerState} from './models/state.model';\r\nimport {Settings} from './models/settings.model';\r\nimport {Playground} from '~models/playground.model';\r\nimport {GameService} from '~services/game.service';\r\nimport {Player} from '~models/player.model';\r\nimport {Router} from '@angular/router';\r\nimport {DialogService} from '~services/dialog.service';\r\nimport {slideInAnimation} from '../route-animation';\r\nimport {ApplicationStateService} from '~services/application-state.service';\r\n\r\n@Component({\r\n  templateUrl: './killer.component.html',\r\n  animations: [slideInAnimation],\r\n})\r\nexport class KillerComponent extends Playground<KillerState> {\r\n\r\n  settings: Settings;\r\n\r\n  constructor(application: ApplicationStateService, game: GameService, route: Router, dialogService: DialogService) {\r\n    super(application, game, route, dialogService, 2);\r\n    this.settings = new Settings();\r\n    this.nextEnabled = false;\r\n    this.zeroEnabled = false;\r\n    this.multiEnabled = false;\r\n  }\r\n\r\n  customReset() {\r\n    this.game.players.forEach(player => player.state = new KillerState(this.settings.numberOfLives, this.settings.boardingLimit));\r\n  }\r\n\r\n  customNext() {\r\n    while (this.getPlayerState(this.game.getActualPlayer()).isInactive()) {\r\n      this.game.nextPlayer();\r\n    }\r\n  }\r\n\r\n  customSettingsValidation(): boolean {\r\n    return this.settings.numberOfLives > 0 && this.settings.boardingLimit > 0;\r\n  }\r\n\r\n  calculatePoints(score: number): Promise<any> {\r\n\r\n    const player = this.game.getActualPlayer();\r\n    const state: KillerState = this.getPlayerState(player);\r\n\r\n    if (this.game.round === 0) {\r\n      state.actField = score;\r\n      player.score = score;\r\n      if (this.game.isActualPlayerTheLast()) {\r\n        this.nextEnabled = true;\r\n        this.zeroEnabled = true;\r\n        this.multiEnabled = true;\r\n      }\r\n    } else {\r\n      if (state.killer) {\r\n        if (score === state.actField) {\r\n          state.life = Number(state.life) + Number(this.multiplier);\r\n          if (state.life > this.settings.numberOfLives) {\r\n            state.life = this.settings.numberOfLives;\r\n          }\r\n        } else {\r\n          this.game.players.filter(p => p.id !== player.id && !this.getPlayerState(p).isInactive()).forEach(p => {\r\n            const s = this.getPlayerState(p);\r\n            if (s.actField === score) {\r\n              s.life -= this.multiplier;\r\n              if (s.life < 0) {\r\n                s.life = 0;\r\n              }\r\n            }\r\n          });\r\n        }\r\n      } else if (score === state.actField) {\r\n        state.boarding -= this.multiplier;\r\n        if (state.boarding <= 0) {\r\n          state.boarding = 0;\r\n        }\r\n        state.killer = state.boarding === 0;\r\n      }\r\n    }\r\n    return Promise.resolve();\r\n  }\r\n\r\n  checkPlayerState(): Promise<any> {\r\n    if (this.game.round !== 0) {\r\n      const actualPlayer = this.game.getActualPlayer();\r\n      actualPlayer.win = !this.game.players.some(p => p.id !== actualPlayer.id && !this.getPlayerState(p).isInactive());\r\n    }\r\n    if (this.game.round === 0 || this.game.actualThrow === 3) {\r\n      this.game.nextPlayer();\r\n    }\r\n    while (this.getPlayerState(this.game.getActualPlayer()).isInactive()) {\r\n      this.game.nextPlayer();\r\n    }\r\n    return Promise.resolve();\r\n  }\r\n\r\n  isFieldEnabledToThrow(field: number): boolean {\r\n    if (this.game.round === 0) {\r\n      return field !== 25 && !this.getAllEnabledFields().some(f => f === field);\r\n    }\r\n    return this.getAllEnabledFields().some(f => f === field);\r\n  }\r\n\r\n  isHighlighted(field: number): boolean {\r\n    if (this.game.round === 0) {\r\n      return this.isFieldEnabledToThrow(field);\r\n    }\r\n    const state = this.getPlayerState(this.game.getActualPlayer());\r\n    if (state.killer) {\r\n      return this.isFieldEnabledToThrow(field) && !this.isSecondHighlighted(field);\r\n    }\r\n    return state.actField === field;\r\n  }\r\n\r\n  isSecondHighlighted(field: number): boolean {\r\n    const state = this.getPlayerState(this.game.getActualPlayer());\r\n    if (state.killer) {\r\n      return state.actField === field;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  getFieldIcon(field: number): string {\r\n    if (this.game.players.some(p => {\r\n      const s = this.getPlayerState(p)\r\n      return !s.isInactive() && s.life <= 3 && s.actField === field;\r\n    })) {\r\n      return 'sentiment_very_dissatisfied';\r\n    } else if (this.game.players.some(p => {\r\n      const s = this.getPlayerState(p)\r\n      return s.isInactive() && s.actField === field;\r\n    })) {\r\n      return 'highlight_off';\r\n    }\r\n\r\n    return '';\r\n  }\r\n\r\n  getFieldNote(field: number): string {\r\n    const owner = this.game.players.find(p => (<KillerState>p.state).actField === field);\r\n    return owner ? `${owner.name}(${(<KillerState>owner.state).life})` : '';\r\n  }\r\n\r\n  getPlayerField(player: Player): string {\r\n    const score = this.getPlayerState(player).actField;\r\n    return score === 25 ? 'B' : (score + '');\r\n  }\r\n\r\n  getLife(player: Player): number {\r\n    return this.getPlayerState(player).life;\r\n  }\r\n\r\n  getBoarding(player: Player): number {\r\n    return this.getPlayerState(player).boarding;\r\n  }\r\n\r\n  isKiller(player: Player): boolean {\r\n    return this.getPlayerState(player).killer;\r\n  }\r\n\r\n  isInactive(player: Player): boolean {\r\n    return this.getPlayerState(player).isInactive();\r\n  }\r\n\r\n  private getAllEnabledFields(): number[] {\r\n    return this.game.players.filter(p => !this.getPlayerState(p).isInactive()).map(p => this.getPlayerState(p).actField);\r\n  }\r\n}\r\n","<div id=\"playgroundContent\">\r\n\r\n  <app-settings *ngIf=\"settingsOpen\" [title]=\"'Killer'\" [playground]=\"playground\">\r\n    <h2>Games</h2>\r\n    <div class=\"field-set\">\r\n      <mat-form-field appearance=\"outline\" class=\"big\">\r\n        <mat-label>Life limit</mat-label>\r\n        <input [(ngModel)]=\"settings.numberOfLives\" type=\"number\" matInput>\r\n      </mat-form-field>\r\n      <mat-form-field appearance=\"outline\" class=\"big\">\r\n        <mat-label>Boarding</mat-label>\r\n        <input [(ngModel)]=\"settings.boardingLimit\" type=\"number\" matInput>\r\n      </mat-form-field>\r\n    </div>\r\n  </app-settings>\r\n\r\n  <div class=\"side-left\">\r\n    <app-game-toolbar [playground]=\"playground\" *ngIf=\"!settingsOpen\"></app-game-toolbar>\r\n    <ng-container *ngIf=\"!settingsOpen\">\r\n      <div class=\"player {{(i === game.actualPlayerIndex) ? 'highlighted' : ''}} {{isInactive(player) ? 'inactive' : ''}} {{isKiller(player) ? 'highlighted2' : ''}}\"\r\n          *ngFor=\"let player of game.players; let i = index\">\r\n        <app-player-score [player]=\"player\" [scoreDisplayed]=\"false\">\r\n          <ng-container *ngIf=\"getPlayerField(player) !== '0'\">\r\n            <div class=\"score\"><label>Field: </label>{{getPlayerField(player)}}</div>\r\n            <div class=\"clear\"></div>\r\n            <div class=\"line\"></div>\r\n            <div class=\"score\">\r\n              <label>Life: </label>{{getLife(player)}}\r\n              <ng-container *ngIf=\"!isKiller(player)\"><label>Boarding: </label>{{getBoarding(player)}}</ng-container>\r\n            </div>\r\n          </ng-container>\r\n        </app-player-score>\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n  <app-number-plate [playground]=\"playground\" *ngIf=\"!settingsOpen\"></app-number-plate>\r\n</div>\r\n","import {NgModule} from '@angular/core';\r\nimport {RouterModule} from '@angular/router';\r\nimport {KillerComponent} from './killer.component';\r\nimport {SharedModule} from '../shared/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    RouterModule.forChild([\r\n      {path: '', component: KillerComponent}\r\n    ])\r\n  ],\r\n  declarations: [KillerComponent]\r\n})\r\nexport class KillerModule {\r\n}\r\n","export class Settings {\r\n  numberOfLives: number;\r\n  boardingLimit: number;\r\n\r\n  constructor() {\r\n    this.numberOfLives = 7;\r\n    this.boardingLimit = 3;\r\n  }\r\n}\r\n","import {PlaygroundState} from '~models/playground-state.model';\r\n\r\nexport class KillerState extends PlaygroundState {\r\n\r\n  actField: number;\r\n  killer: boolean;\r\n\r\n  constructor(public life = 5, public boarding = 3) {\r\n    super();\r\n    this.actField = 0;\r\n    this.killer = false;\r\n  }\r\n\r\n  isInactive(): boolean {\r\n    return this.life <= 0;\r\n  }\r\n\r\n  clone(): KillerState {\r\n    const state: KillerState = new KillerState();\r\n    state.actField = this.actField;\r\n    state.life = this.life;\r\n    state.boarding = this.boarding;\r\n    state.killer = this.killer;\r\n    return state;\r\n  }\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {MatDialogModule} from '@angular/material/dialog';\r\nimport {MatButtonModule} from '@angular/material/button';\r\nimport {MatIconModule} from '@angular/material/icon';\r\nimport {MatInputModule} from '@angular/material/input';\r\nimport {MatDividerModule} from '@angular/material/divider';\r\nimport {MatAutocompleteModule} from '@angular/material/autocomplete';\r\n\r\n\r\nconst materialImports = [\r\n  MatDialogModule,\r\n  MatButtonModule,\r\n  MatIconModule,\r\n  MatInputModule,\r\n  MatDividerModule,\r\n  MatAutocompleteModule\r\n];\r\n\r\n@NgModule({\r\n  imports: materialImports,\r\n  exports: materialImports,\r\n})\r\nexport class MaterialModule {\r\n}\r\n\r\n// Copyright 2018 Google Inc. All Rights Reserved.\r\n//   Use of this source code is governed by an MIT-style license that\r\n//   can be found in the LICENSE file at http://angular.io/license\r\n","import {animate, animateChild, group, query, style, transition, trigger} from '@angular/animations';\r\n\r\nexport const slideInAnimation =\r\n  trigger('routeAnimations', [\r\n    transition('* <=> *', [\r\n      style({position: 'relative'}),\r\n      query(':enter, :leave', [\r\n        style({\r\n          position: 'absolute',\r\n          top: 0,\r\n          left: 0,\r\n          width: '100%'\r\n        })\r\n      ], {optional: true}),\r\n      query(':enter', [\r\n        style({left: '-100%'})\r\n      ], {optional: true}),\r\n      query(':leave', animateChild(), {optional: true}),\r\n      group([\r\n        query(':leave', [\r\n          animate('300ms ease-out', style({left: '100%'}))\r\n        ], {optional: true}),\r\n        query(':enter', [\r\n          animate('300ms ease-out', style({left: '0%'}))\r\n        ], {optional: true})\r\n      ]),\r\n      query(':enter', animateChild(), {optional: true}),\r\n    ]),\r\n  ]);\r\n","export class Settings {\r\n\r\n  fields: string[];\r\n  numbs: boolean[] = [];\r\n  noScore: boolean;\r\n  halveIt: boolean;\r\n\r\n  constructor() {\r\n    this.fields = [];\r\n    this.noScore = false;\r\n    this.halveIt = false;\r\n    let defaultSet = true;\r\n    for (let i = 0; i < 21; i++) {\r\n      this.numbs[i] = defaultSet;\r\n      if (i === 19) {\r\n        defaultSet = false;\r\n      }\r\n    }\r\n    this.initFields();\r\n  }\r\n\r\n  randomize() {\r\n    for (let i = 0; i < this.numbs.length; i++) {\r\n      this.numbs[i] = false;\r\n    }\r\n    for (let i = 0; i < 8; i++) {\r\n      let rand = Math.floor(Math.random() * 21);\r\n      while (this.numbs[rand]) {\r\n        rand = Math.floor(Math.random() * 21);\r\n      }\r\n      this.numbs[rand] = true;\r\n    }\r\n    this.initFields();\r\n  }\r\n\r\n  toggleNoScore() {\r\n    this.noScore = !this.noScore;\r\n  }\r\n\r\n  toggleHalveIt() {\r\n    this.halveIt = !this.halveIt;\r\n  }\r\n\r\n\r\n  getNumbers() {\r\n    const numbers: number[] = [];\r\n    for (let i = 0; i < 21; i++) {\r\n      numbers[i] = (i + 1);\r\n    }\r\n    return numbers;\r\n  }\r\n\r\n  setNumber(i: number) {\r\n    this.numbs[i] = !this.numbs[i];\r\n    this.initFields();\r\n  }\r\n\r\n  initFields() {\r\n    this.fields = [];\r\n    for (let i = 0; i < 21; i++) {\r\n      if (this.numbs[i]) {\r\n        this.fields.push(i === 20 ? 'B' : ((i + 1) + ''));\r\n      }\r\n    }\r\n  }\r\n}\r\n","import {PlaygroundState} from '~models/playground-state.model';\r\nimport {FieldValue} from '~models/field-value.model';\r\n\r\nexport class ShanghaiState extends PlaygroundState {\r\n\r\n  fieldCount: FieldValue[];\r\n  fieldScore: FieldValue[];\r\n\r\n  constructor() {\r\n    super();\r\n    this.fieldCount = [];\r\n    this.fieldScore = [];\r\n  }\r\n\r\n  getFieldCount(field: string): number {\r\n    return this.getFieldValue(this.fieldCount, field).value;\r\n  }\r\n\r\n  increaseFieldCount(field: string, value: number) {\r\n    this.getFieldValue(this.fieldCount, field).value += value;\r\n  }\r\n\r\n  getFieldScore(field: string): number {\r\n    return this.getFieldValue(this.fieldScore, field).value;\r\n  }\r\n\r\n  increaseFieldScore(field: string, value: number) {\r\n    this.getFieldValue(this.fieldScore, field).value += value;\r\n  }\r\n\r\n  clone(): ShanghaiState {\r\n    const state: ShanghaiState = new ShanghaiState();\r\n    this.fieldCount.forEach(fv => state.fieldCount.push(fv.clone()));\r\n    this.fieldScore.forEach(fv => state.fieldScore.push(fv.clone()));\r\n    return state;\r\n  }\r\n}\r\n","import {Component} from '@angular/core';\r\nimport {ShanghaiState} from './models/state.model';\r\nimport {Settings} from './models/settings.model';\r\nimport {Playground} from '~models/playground.model';\r\nimport {GameService} from '~services/game.service';\r\nimport {Player} from '~models/player.model';\r\nimport {Router} from '@angular/router';\r\nimport {DialogService} from '~services/dialog.service';\r\nimport {slideInAnimation} from '../route-animation';\r\nimport {ApplicationStateService} from '~services/application-state.service';\r\n\r\n@Component({\r\n  templateUrl: './shanghai.component.html',\r\n  animations: [slideInAnimation],\r\n})\r\nexport class ShanghaiComponent extends Playground<ShanghaiState> {\r\n\r\n  settings: Settings;\r\n\r\n  constructor(application: ApplicationStateService, game: GameService, route: Router, dialogService: DialogService) {\r\n    super(application, game, route, dialogService);\r\n    this.settings = new Settings();\r\n  }\r\n\r\n  customReset() {\r\n    this.game.players.forEach(player => player.state = new ShanghaiState());\r\n  }\r\n\r\n  customSettingsValidation(): boolean {\r\n    return this.settings.fields.length > 0;\r\n  }\r\n\r\n  calculatePoints(score: number): Promise<any> {\r\n    const player = this.game.getActualPlayer();\r\n    const state = this.getPlayerState(player);\r\n    const field = score === 25 ? 'B' : (score + '');\r\n    if (this.isActiveField(field)) {\r\n      state.increaseFieldCount(field, 1);\r\n      state.increaseFieldScore(field, this.multiplier);\r\n      if (this.settings.noScore) {\r\n        player.score += this.multiplier;\r\n      } else {\r\n        player.score += Playground.getFieldValueAsNumber(field) * this.multiplier;\r\n      }\r\n    }\r\n    return Promise.resolve();\r\n  }\r\n\r\n  checkPlayerState(): Promise<any> {\r\n    const player = this.game.getActualPlayer();\r\n\r\n    // Shanghai rule\r\n    if (this.game.actualThrow === 3) {\r\n      let multi = 1;\r\n      for (let i = 0; i < 3; i++) {\r\n        const t = player.throwsHistory[player.throwsHistory.length - i - 1];\r\n        if (t.field === this.getPreviousField()) {\r\n          multi *= (t.multi + 1);\r\n        }\r\n      }\r\n      if (multi === 1 && this.settings.halveIt) {\r\n        player.score = Math.round(player.score / 2);\r\n      }\r\n      player.win = multi === 24;\r\n      if (player.win) {\r\n        this.extraEndingMsg = 'SHANGHAI!!!';\r\n      }\r\n    }\r\n\r\n    const gameEnded = (this.game.round === (this.settings.fields.length - 1))\r\n      && this.game.isActualPlayerTheLast() && this.game.isTheLastThrow();\r\n    if (gameEnded) {\r\n      this.game.players.forEach(p => p.win = this.game.isTheBestPlayer(p));\r\n      console.log(this.game.players);\r\n\r\n    } else if (this.game.actualThrow === 3) {\r\n      this.game.nextPlayer();\r\n    }\r\n\r\n    return Promise.resolve();\r\n  }\r\n\r\n  getFieldValue(player: Player, field: string): string {\r\n    const fieldCount = this.getPlayerState(player).getFieldCount(field);\r\n    if (fieldCount === 0) {\r\n      return '';\r\n    } else {\r\n      let str = '' + this.getPlayerState(player).getFieldScore(field) * Playground.getFieldValueAsNumber(field);\r\n      for (let i = 0; i < fieldCount; i++) {\r\n        str += '';\r\n      }\r\n      for (let i = fieldCount; i < 3; i++) {\r\n        str += '';\r\n      }\r\n      return str;\r\n    }\r\n  }\r\n\r\n  isActiveField(field: string): boolean {\r\n    return this.settings.fields[this.game.round] === field;\r\n  }\r\n\r\n  isDoneField(field: string): boolean {\r\n    return this.settings.fields.indexOf(field) < this.game.round;\r\n  }\r\n\r\n  isFieldEnabledToThrow(field: number): boolean {\r\n    let fieldStr = field + '';\r\n    if (field === 25) {\r\n      fieldStr = 'B';\r\n    }\r\n    return this.settings.fields.indexOf(fieldStr) === this.game.round;\r\n  }\r\n\r\n  isHighlighted(field: number): boolean {\r\n    return this.isFieldEnabledToThrow(field);\r\n  }\r\n\r\n  isLastRound(): boolean {\r\n    return this.game.round === this.settings.fields.length - 1;\r\n  }\r\n\r\n  private getPreviousField(): string {\r\n    return this.settings.fields[this.game.round > 0 ? this.game.round : 0];\r\n  }\r\n}\r\n","<div id=\"playgroundContent\">\r\n\r\n  <app-settings *ngIf=\"settingsOpen\" [title]=\"'Shanghai / Halve It'\" [playground]=\"playground\">\r\n    <h2>Fields</h2>\r\n    <button mat-raised-button class=\"button\" [color]=\"settings.numbs[i]?'primary':''\"\r\n            *ngFor=\"let numb of settings.getNumbers(); let i = index\" (click)=\"settings.setNumber(i)\">\r\n      {{numb === 21 ? 'B' : numb}}\r\n    </button>\r\n    <mat-divider></mat-divider>\r\n\r\n    <button mat-raised-button class=\"button big capitalize\" (click)=\"settings.randomize()\">Randomize</button>\r\n    <button mat-raised-button class=\"button shortmedium\"  [color]=\"settings.noScore?'primary':''\"\r\n            (click)=\"settings.toggleNoScore()\">No score\r\n    </button>\r\n    <button mat-raised-button class=\"button shortmedium\"  [color]=\"settings.halveIt?'primary':''\"\r\n            (click)=\"settings.toggleHalveIt()\">Halve It\r\n    </button>\r\n  </app-settings>\r\n\r\n  <div class=\"side-left\">\r\n    <app-game-toolbar [playground]=\"playground\" *ngIf=\"!settingsOpen\"></app-game-toolbar>\r\n    <ng-container *ngIf=\"!settingsOpen\">\r\n      <div class=\"player {{(i === game.actualPlayerIndex) ? 'highlighted' : ''}}\"\r\n           *ngFor=\"let player of game.players; let i = index\">\r\n        <app-player-score [player]=\"player\">\r\n          <div class=\"field-set\">\r\n            <div class=\"field {{isActiveField(field) ? 'active': ''}} {{isDoneField(field) ? '' : 'highlighted'}}\"\r\n                 *ngFor=\"let field of settings.fields\">\r\n              {{field}}: <span class=\"small\">{{ getFieldValue(player, field) }}</span>\r\n            </div>\r\n          </div>\r\n        </app-player-score>\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n  <app-number-plate [playground]=\"playground\" *ngIf=\"!settingsOpen\"></app-number-plate>\r\n</div>\r\n","import {NgModule} from '@angular/core';\r\nimport {RouterModule} from '@angular/router';\r\nimport {ShanghaiComponent} from './shanghai.component';\r\nimport {SharedModule} from '../shared/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    RouterModule.forChild([\r\n      {path: '', component: ShanghaiComponent}\r\n    ])\r\n  ],\r\n  declarations: [ShanghaiComponent]\r\n})\r\nexport class ShanghaiModule {\r\n}\r\n","import {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {Component, Inject} from '@angular/core';\r\nimport {Player} from '~models/player.model';\r\n\r\n@Component({\r\n  templateUrl: 'dialog.component.html',\r\n  styleUrls: ['dialog.component.scss']\r\n})\r\nexport class DialogComponent {\r\n  constructor(protected dialogRef: MatDialogRef<DialogComponent>,\r\n              @Inject(MAT_DIALOG_DATA) public data: { title: string, content: string, players: Player[] }) {\r\n  }\r\n\r\n  close(): void {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n","<div class=\"dialog-container evo-typography\">\r\n  <div mat-dialog-title class=\"subtitle-1\"><p>{{ data.title }}</p></div>\r\n  <mat-dialog-content class=\"body-2\" *ngIf=\"!!data.content || !!data.players.length\">\r\n    <p>{{ data.content }}</p>\r\n    <div class=\"score-line\" *ngFor=\"let player of data.players; let i = index\" [class.winner]=\"player.win\">\r\n      <div>{{i+1}}. {{player.name}} <mat-icon color=\"warn\" *ngIf=\"player.win\">star</mat-icon></div>\r\n      <div>{{player.score}}</div>\r\n    </div>\r\n  </mat-dialog-content>\r\n  <mat-dialog-actions>\r\n    <button mat-button [mat-dialog-close]=\"true\">Ok</button>\r\n  </mat-dialog-actions>\r\n</div>\r\n","import {Component, Input} from '@angular/core';\r\nimport {Playground} from '~models/playground.model';\r\nimport {GameService} from '~services/game.service';\r\nimport {Router} from '@angular/router';\r\nimport {PlaygroundState} from '~models/playground-state.model';\r\n\r\n@Component({\r\n  selector: 'app-game-toolbar',\r\n  templateUrl: './game-toolbar.component.html',\r\n  styleUrls: ['./game-toolbar.component.scss']\r\n})\r\nexport class GameToolbarComponent {\r\n\r\n  @Input() playground: Playground<PlaygroundState>;\r\n\r\n  constructor(public route: Router) {\r\n  }\r\n\r\n  quit() {\r\n    this.route.navigate(['/']);\r\n    this.playground.game.resetScore();\r\n    this.playground.multiplier = 1;\r\n    this.playground.extraEndingMsg = '';\r\n  }\r\n\r\n  showSettings() {\r\n    this.playground.reset();\r\n    this.playground.settingsOpen = true;\r\n  }\r\n}\r\n","<div class=\"toolbar\">\r\n  <div class=\"buttons\">\r\n    <button mat-raised-button (click)=\"quit()\">\r\n      <mat-icon>menu</mat-icon>\r\n    </button>\r\n    <button mat-raised-button (click)=\"playground.newGame(true)\">\r\n      <mat-icon>refresh</mat-icon>\r\n    </button>\r\n    <button mat-raised-button (click)=\"showSettings()\">\r\n      <mat-icon>build</mat-icon>\r\n    </button>\r\n    <button mat-raised-button (click)=\"playground.undo()\">\r\n      <mat-icon>undo</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"round-info\">{{playground.game.round+1}}.</div>\r\n</div>\r\n<div class=\"clear\"></div>\r\n","import {Component, Input} from '@angular/core';\r\nimport {GameService} from '~services/game.service';\r\n\r\n@Component({\r\n  selector: 'app-number-plate',\r\n  templateUrl: './number-plate.component.html',\r\n  styleUrls: ['./number-plate.component.scss']\r\n})\r\nexport class NumberPlateComponent {\r\n\r\n  @Input() playground: any;\r\n\r\n  constructor(public game: GameService) {\r\n  }\r\n\r\n  getNumbers(): number[] {\r\n    const numbers: number[] = [];\r\n    for (let i = 1; i <= 20; i++) {\r\n      numbers[i - 1] = i;\r\n    }\r\n    return numbers;\r\n  }\r\n\r\n  getNumberColor(field: number): string {\r\n    if (this.playground.isHighlighted(field)) {\r\n      return 'primary';\r\n    } else if (this.playground.isSecondHighlighted(field)) {\r\n      return 'accent';\r\n    }\r\n    return '';\r\n  }\r\n\r\n  isNumberDisabled(field: number): boolean {\r\n    return !this.playground.isFieldEnabledToThrow(field) && !this.getNumberColor(field);\r\n  }\r\n\r\n  throwNumber(field: number) {\r\n    this.playground.throwNumber(this.playground.isFieldEnabledToThrow(field) ? field : 0);\r\n  }\r\n}\r\n\r\n","<div class=\"side-right\">\r\n\r\n  <button mat-raised-button *ngFor=\"let i of getNumbers()\" class=\"number\" [color]=\"getNumberColor(i)\"\r\n          [disabled]=\"isNumberDisabled(i)\" (click)=\"throwNumber(i)\">\r\n    {{i}}\r\n    <mat-icon *ngIf=\"playground.getFieldIcon(i)\">{{ playground.getFieldIcon(i)}}</mat-icon>\r\n    <p class=\"field-note\" *ngIf=\"playground.getFieldNote(i)\">{{ playground.getFieldNote(i)}}</p>\r\n  </button>\r\n  <button mat-raised-button class=\"number\" [color]=\"getNumberColor(25)\" [disabled]=\"isNumberDisabled(25)\"\r\n          (click)=\"throwNumber(25)\">\r\n    Bull\r\n    <mat-icon *ngIf=\"playground.getFieldIcon(25)\">{{ playground.getFieldIcon(25)}}</mat-icon>\r\n    <p class=\"field-note\" *ngIf=\"playground.getFieldNote(25)\">{{ playground.getFieldNote(25)}}</p>\r\n  </button>\r\n\r\n  <button mat-raised-button class=\"number\" [color]=\"playground.multiplier === 2 ? 'primary' : ''\"\r\n          (click)=\"playground.doublePoint()\" [disabled]=\"!playground.multiEnabled\">Double</button>\r\n  <button mat-raised-button class=\"number\" [color]=\"playground.multiplier === 3 ? 'primary' : ''\"\r\n          (click)=\"playground.triplePoint()\" [disabled]=\"!playground.multiEnabled\">Triple</button>\r\n\r\n  <button mat-raised-button class=\"number\" (click)=\"playground.skip()\" [disabled]=\"!playground.nextEnabled\">Next</button>\r\n  <button mat-raised-button class=\"number\" (click)=\"playground.throwNumber(0)\" [disabled]=\"!playground.zeroEnabled\">0</button>\r\n</div>\r\n","import {Component, Input, ViewEncapsulation} from '@angular/core';\r\nimport {Player} from '~models/player.model';\r\n\r\n@Component({\r\n  selector: 'app-player-score',\r\n  templateUrl: './player-score.component.html',\r\n  styleUrls: ['./player-score.component.scss'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class PlayerScoreComponent {\r\n  @Input() player: Player;\r\n  @Input() hasContent = true;\r\n  @Input() scoreDisplayed = true;\r\n}\r\n","<div class=\"player_info\">\r\n  <div class=\"name\">{{player.name}}</div>\r\n  <div class=\"shoots\">\r\n    <div class=\"shoot\">{{!player.throws[0] ? '-' : player.throws[0]}}</div>\r\n    <div class=\"shoot\">{{!player.throws[1] ? '-' : player.throws[1]}}</div>\r\n    <div class=\"shoot\">{{!player.throws[2] ? '-' : player.throws[2]}}</div>\r\n    <div class=\"shoot total\">{{!player.getThrowsTotal() ? '0' : player.getThrowsTotal()}}</div>\r\n  </div>\r\n  <div class=\"clear\"></div>\r\n  <div class=\"line\" *ngIf=\"hasContent\"></div>\r\n  <ng-content></ng-content>\r\n  <div class=\"line\" *ngIf=\"scoreDisplayed\"></div>\r\n  <div class=\"score\" *ngIf=\"scoreDisplayed\">{{player.score}}</div>\r\n  <div class=\"clear\"></div>\r\n</div>\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {Playground} from '~models/playground.model';\r\nimport {PlaygroundState} from '~models/playground-state.model';\r\nimport { ApplicationStateService } from '~services/application-state.service';\r\n\r\n@Component({\r\n  selector: 'app-player-settings',\r\n  templateUrl: './player-settings.component.html',\r\n  styleUrls: ['./player-settings.component.scss']\r\n})\r\nexport class PlayerSettingsComponent {\r\n  @Input() playground: Playground<PlaygroundState>;\r\n  storedPlayers = [];\r\n\r\n  constructor(private application: ApplicationStateService) {\r\n    this.storedPlayers = this.application.getStoredPlayers();\r\n  }\r\n\r\n  getOptions() {\r\n    return this.storedPlayers.filter(o => this.playground.game.players.map(p => p.name).indexOf(o) === -1);\r\n  }\r\n}\r\n","<div class=\"add-player\">\r\n  <mat-form-field appearance=\"outline\" class=\"big\">\r\n    <mat-label>Player name</mat-label>\r\n    <input #playerNameInput type=\"text\" matInput placeholder=\"Enter name\"\r\n      [disabled]=\"!playground.canAddPlayer()\" [matAutocomplete]=\"auto\">\r\n    <mat-autocomplete #auto=\"matAutocomplete\">\r\n      <mat-option *ngFor=\"let option of getOptions()\" [value]=\"option\">\r\n        {{option}}\r\n      </mat-option>\r\n    </mat-autocomplete>\r\n  </mat-form-field>\r\n  <button mat-icon-button (click)=\"playground.addPlayer(playerNameInput)\" [disabled]=\"!playground.canAddPlayer()\"><mat-icon>add_circle</mat-icon></button>\r\n</div>\r\n<div class=\"player-table\">\r\n  <div class=\"player-row\" *ngFor=\"let player of playground.game.players; let i = index\">\r\n    <div class=\"player-name\">{{player.name}}</div>\r\n    <button mat-icon-button (click)=\"playground.removePlayer(player)\"><mat-icon>remove_circle</mat-icon></button>\r\n  </div>\r\n</div>\r\n","import {Component, Input, ViewEncapsulation} from '@angular/core';\r\nimport {Playground} from '~models/playground.model';\r\nimport {PlaygroundState} from '~models/playground-state.model';\r\n\r\n@Component({\r\n  selector: 'app-settings',\r\n  templateUrl: './settings.component.html',\r\n  styleUrls: ['./settings.component.scss'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class SettingsComponent {\r\n  @Input() playground: Playground<PlaygroundState>;\r\n  @Input() title: string;\r\n}\r\n","<div class=\"settings\">\r\n  <h1>{{title}} Settings</h1>\r\n\r\n  <h2>Players</h2>\r\n  <app-player-settings [playground]=\"playground\"></app-player-settings>\r\n  <mat-divider></mat-divider>\r\n\r\n  <ng-content></ng-content>\r\n\r\n  <mat-divider></mat-divider>\r\n  <button mat-raised-button class=\"button big\" (click)=\"playground.newGame()\">Start</button>\r\n  <button mat-raised-button class=\"button big\" (click)=\"playground.quit()\">Cancel</button>\r\n</div>\r\n","export class ApplicationSettings {\r\n  darkTheme = false;\r\n}","export class FieldValue {\r\n  field: string;\r\n  value: number;\r\n\r\n  constructor(field: string, value: number) {\r\n    this.field = field;\r\n    this.value = value;\r\n  }\r\n\r\n  clone(): FieldValue {\r\n    return new FieldValue(this.field, this.value);\r\n  }\r\n}\r\n","import {Throw} from './throw.model';\r\nimport {PlaygroundState} from '~models/playground-state.model';\r\n\r\nexport class Player {\r\n  score = 0;\r\n  throws: number[] = [];\r\n  throwsHistory: Throw[];\r\n  win = false;\r\n  first = true;\r\n  state: PlaygroundState;\r\n\r\n  constructor(public id: number, public name = '') {\r\n  }\r\n\r\n  getThrowsTotal(): number {\r\n    return this.throws.reduce((a, b) => a + b, 0);\r\n  }\r\n\r\n  addThrowHistory(thr: Throw) {\r\n    this.throwsHistory.push(thr);\r\n  }\r\n\r\n  reset() {\r\n    this.score = 0;\r\n    this.throws = [];\r\n    this.throwsHistory = [];\r\n    this.win = false;\r\n    this.first = true;\r\n  }\r\n\r\n  clone(): Player {\r\n    const player = new Player(this.id, this.name);\r\n    player.score = this.score;\r\n    player.throws = [];\r\n    this.throws.forEach(t => {\r\n      player.throws.push(t);\r\n    });\r\n    player.throwsHistory = this.throwsHistory;\r\n    player.win = this.win;\r\n    player.first = this.first;\r\n    player.throwsHistory = [];\r\n    this.throwsHistory.forEach(throws => {\r\n      player.throwsHistory.push(throws.clone());\r\n    });\r\n    if (this.state) {\r\n        player.state = this.state.clone();\r\n    }\r\n    return player;\r\n  }\r\n}\r\n","import {FieldValue} from './field-value.model';\r\n\r\nexport abstract class PlaygroundState {\r\n\r\n  getFieldValue(list: FieldValue[], field: string): FieldValue {\r\n    const filtered = list.filter(f => f.field === field);\r\n    if (filtered.length === 0) {\r\n      list.push(new FieldValue(field, 0));\r\n    }\r\n    return list.filter(f => f.field === field)[0];\r\n  }\r\n\r\n  abstract clone(): PlaygroundState;\r\n}\r\n","import {OnInit} from '@angular/core';\r\nimport {v4 as uuid} from 'uuid';\r\nimport {GameService} from '../services/game.service';\r\nimport {Player} from './player.model';\r\nimport {Throw} from './throw.model';\r\nimport {Router} from '@angular/router';\r\nimport {PlaygroundState} from '~models/playground-state.model';\r\nimport {DialogService} from '~services/dialog.service';\r\nimport {ApplicationStateService} from '~services/application-state.service';\r\n\r\nexport const FIELDS = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', 'B'];\r\nexport const FIELDS_COUNT = 21;\r\nconst MAXIMUM_NUMBER_OF_PLAYERS = 6;\r\n\r\nexport abstract class Playground<T extends PlaygroundState> implements OnInit {\r\n\r\n  throwEnabled = true;\r\n  settingsOpen = true;\r\n  gameHistory: GameService[];\r\n  nextEnabled = true;\r\n  zeroEnabled = true;\r\n  multiEnabled = true;\r\n  playground = this;\r\n  multiplier: number;\r\n  extraEndingMsg: string;\r\n\r\n  protected constructor(public application: ApplicationStateService,\r\n    public game: GameService,\r\n    public route: Router,\r\n    public dialogService: DialogService,\r\n    public minimumNumberOfPlayers = 1) {\r\n  }\r\n\r\n  static getFieldValueAsNumber(field: string): number {\r\n    return field === 'B' ? 25 : parseInt(field, 10);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.settingsOpen = true;\r\n    this.extraEndingMsg = '';\r\n  }\r\n\r\n  throwNumber(score: number): Promise<void> {\r\n    if (this.throwEnabled) {\r\n      this.save();\r\n      this.throwEnabled = false;\r\n      if (score === 25 && this.multiplier === 3) {\r\n        this.multiplier = 1;\r\n      }\r\n\r\n      const actualPlayer = this.game.getActualPlayer();\r\n      actualPlayer.addThrowHistory(new Throw(score, this.multiplier, this.game.actualThrow));\r\n      if (this.game.actualThrow === 0) {\r\n        actualPlayer.throws = [];\r\n      }\r\n      actualPlayer.throws[this.game.actualThrow] = score * this.multiplier;\r\n      this.game.actualThrow++;\r\n\r\n      return this.calculatePoints(score)\r\n        .then(() => this.checkPlayerState())\r\n        .then(() => {\r\n          this.multiplier = 1;\r\n\r\n          const winners = this.game.players.filter(p => p.win);\r\n          if (winners.length > 0) {\r\n            if (this.game.victoryFirst || this.game.players.length - winners.length <= 1) {\r\n              this.dialogService.openDialog('Game Over!', this.extraEndingMsg, this.game.clone().players);\r\n              this.newGame(true);\r\n            } else if (this.game.victoryFirst) {\r\n              this.dialogService.openDialog('Game Over!', this.extraEndingMsg, this.game.clone().players);\r\n              this.newGame(true);\r\n            } else {\r\n              while (this.game.getActualPlayer().win) {\r\n                this.game.nextPlayer();\r\n              }\r\n            }\r\n          }\r\n          this.throwEnabled = true;\r\n        });\r\n    }\r\n  }\r\n\r\n  newGame(rotate = false) {\r\n    this.settingsOpen = !this.playerSettingsValidation() || !this.customSettingsValidation();\r\n    if (!this.playerSettingsValidation()) {\r\n      this.dialogService.openErrorDialog('Error!', 'Number of players are incorrect.');\r\n    } else if (this.settingsOpen) {\r\n      this.dialogService.openErrorDialog('Error!', 'Settings is incorrect.');\r\n    }\r\n    this.reset();\r\n    if (rotate) {\r\n      this.game.rotatePlayers();\r\n    }\r\n  }\r\n\r\n  canAddPlayer(): boolean {\r\n    return this.game.players.length < MAXIMUM_NUMBER_OF_PLAYERS;\r\n  }\r\n\r\n  addPlayer(name: any) {\r\n    if (!!name.value.trim().length && !this.game.players.some(p => p.name === name.value)) {\r\n      this.game.players.push(new Player(uuid(), name.value));\r\n      this.application.storePlayer(name.value);\r\n    }\r\n    name.value = '';\r\n  }\r\n\r\n  removePlayer(player: Player) {\r\n    this.game.players = this.game.players.filter(p => p !== player);\r\n  }\r\n\r\n  triplePoint() {\r\n    this.multiplier = this.multiplier === 3 ? 1 : 3;\r\n  }\r\n\r\n  doublePoint() {\r\n    this.multiplier = this.multiplier === 2 ? 1 : 2;\r\n  }\r\n\r\n  reset() {\r\n    this.gameHistory = [];\r\n    this.game.resetScore();\r\n    this.multiplier = 1;\r\n    this.extraEndingMsg = '';\r\n    this.customReset();\r\n  }\r\n\r\n  undo() {\r\n    if (this.gameHistory.length > 0) {\r\n      this.game = this.gameHistory.pop();\r\n    }\r\n  }\r\n\r\n  skip() {\r\n    const actThrow = this.game.actualThrow;\r\n    this.throwNumber(0).then(() => {\r\n      if (actThrow !== 2) {\r\n        this.skip();\r\n      }\r\n    });\r\n  }\r\n\r\n  quit() {\r\n    this.route.navigate(['/']);\r\n    this.game.resetScore();\r\n    this.multiplier = 1;\r\n    this.extraEndingMsg = '';\r\n  }\r\n\r\n  customNext() {\r\n    // should be implemented\r\n  }\r\n\r\n  customSettingsValidation(): boolean {\r\n    return true;\r\n  }\r\n\r\n  isHighlighted(field: number): boolean {\r\n    return false;\r\n  }\r\n\r\n  isSecondHighlighted(field: number): boolean {\r\n    return false;\r\n  }\r\n\r\n  getFieldIcon(field: number): string {\r\n    return '';\r\n  }\r\n\r\n  getFieldNote(field: number): string {\r\n    return '';\r\n  }\r\n\r\n  isLastRound(): boolean {\r\n    return false;\r\n  }\r\n\r\n  isFieldEnabledToThrow(field: number): boolean {\r\n    return true;\r\n  }\r\n\r\n  getPlayerState(player: Player): T {\r\n    return <T>player.state;\r\n  }\r\n\r\n  private playerSettingsValidation(): boolean {\r\n    const players: Player[] = [];\r\n    this.game.players.forEach(player => {\r\n      if (player.name.length !== 0) {\r\n        players.push(player);\r\n      }\r\n    });\r\n    this.game.players = players;\r\n    return players.length >= this.minimumNumberOfPlayers;\r\n  }\r\n\r\n  private save() {\r\n    this.gameHistory.push(this.game.clone());\r\n  }\r\n\r\n  abstract customReset(): void;\r\n\r\n  abstract calculatePoints(score: number): Promise<any>;\r\n\r\n  abstract checkPlayerState(): Promise<any>;\r\n}\r\n","export class Throw {\r\n  field: string;\r\n  fieldNum: number;\r\n  multi: number;\r\n  order: number;\r\n\r\n  constructor(fieldNum: number, multi: number, order: number) {\r\n    this.fieldNum = fieldNum;\r\n    this.field = fieldNum === 25 ? 'B' : fieldNum + '';\r\n    this.multi = multi;\r\n    this.order = order;\r\n  }\r\n\r\n  clone(): Throw {\r\n    return new Throw(this.fieldNum, this.multi, this.order);\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {ApplicationSettings} from '~models/application-settings.model';\r\n\r\nconst APPLICATION_KEY = 'ApplicationSettings';\r\nconst PLAYER_KEY = 'Players';\r\n\r\n@Injectable({providedIn: 'root'})\r\nexport class ApplicationStateService {\r\n\r\n  settings = new ApplicationSettings();\r\n\r\n  constructor() {\r\n    const data = localStorage.getItem(APPLICATION_KEY);\r\n    if (data) {\r\n      this.settings = JSON.parse(data);\r\n    }\r\n    this.setTheme();\r\n  }\r\n\r\n  toggleDarkTheme() {\r\n    this.settings.darkTheme = !this.settings.darkTheme;\r\n    this.setTheme();\r\n    this.saveSettings();\r\n  }\r\n\r\n  private setTheme() {\r\n    if (this.settings.darkTheme) {\r\n      document.body.classList.add('dark-theme');\r\n    } else {\r\n      document.body.className = document.body.className.replace('dark-theme', '');\r\n    }\r\n  }\r\n\r\n  private saveSettings() {\r\n    localStorage.setItem(APPLICATION_KEY, JSON.stringify(this.settings));\r\n  }\r\n\r\n  getStoredPlayers(): string[] {\r\n    const data = localStorage.getItem(PLAYER_KEY);\r\n    if (data) {\r\n      return JSON.parse(data);\r\n    }\r\n    return [];\r\n  }\r\n\r\n  storePlayer(name: string) {\r\n    const players = [name, ...this.getStoredPlayers()].filter((v, i, a) => a.indexOf(v) === i);\r\n    localStorage.setItem(PLAYER_KEY, JSON.stringify(players));\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {MatDialog, MatDialogRef} from '@angular/material/dialog';\r\nimport {DialogComponent} from '~components/dialog/dialog.component';\r\nimport {Player} from '~models/player.model';\r\n\r\n@Injectable({providedIn: 'root'})\r\nexport class DialogService {\r\n\r\n  constructor(private dialog: MatDialog) {\r\n  }\r\n\r\n  openDialog(title = '', content = '', players: Player[] = []): MatDialogRef<DialogComponent> {\r\n    return this.dialog.open(DialogComponent, {\r\n      panelClass: 'success-dialog',\r\n      data: {title, content, players},\r\n    });\r\n  }\r\n\r\n  openErrorDialog(title = '', content = ''): MatDialogRef<DialogComponent> {\r\n    return this.dialog.open(DialogComponent, {\r\n      panelClass: 'error-dialog',\r\n      data: {title, content, players: []},\r\n    });\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {Player} from '../models/player.model';\r\n\r\n@Injectable({providedIn: 'root'})\r\nexport class GameService {\r\n  players: Player[] = [];\r\n  actualPlayerIndex: number;\r\n  actualThrow: number;\r\n  round: number;\r\n  victoryFirst = true;\r\n\r\n  toggleVictoryFirst() {\r\n    this.victoryFirst = !this.victoryFirst;\r\n  }\r\n\r\n  isTheFirstThrow(): boolean {\r\n    return this.actualThrow === 1;\r\n  }\r\n\r\n  isTheLastThrow(): boolean {\r\n    return this.actualThrow === 3;\r\n  }\r\n\r\n  getActualPlayer(): Player {\r\n    return this.players[this.actualPlayerIndex];\r\n  }\r\n\r\n  nextPlayer(): void {\r\n    if (this.isActualPlayerTheLast()) {\r\n      this.nextRound();\r\n    }\r\n    this.actualPlayerIndex = (this.actualPlayerIndex + 1) % this.getNumberOfPlayers();\r\n    this.actualThrow = 0;\r\n  }\r\n\r\n  getNumberOfPlayers(): number {\r\n    return this.players.length;\r\n  }\r\n\r\n  getTheFirstPlayer(): Player {\r\n    return this.players[0];\r\n  }\r\n\r\n  isTheFirstPlayer(player: Player): boolean {\r\n    return player.id === this.getTheFirstPlayer().id;\r\n  }\r\n\r\n  isActualPlayerIsTheFirst(): boolean {\r\n    return this.isTheFirstPlayer(this.getActualPlayer());\r\n  }\r\n\r\n  getTheLastPlayer(): Player {\r\n    return this.players[this.getNumberOfPlayers() - 1];\r\n  }\r\n\r\n  isTheLastPlayer(player: Player): boolean {\r\n    return player.id === this.getTheLastPlayer().id;\r\n  }\r\n\r\n  isActualPlayerTheLast(): boolean {\r\n    return this.isTheLastPlayer(this.getActualPlayer());\r\n  }\r\n\r\n  isTheBestPlayer(actPlayer: Player): boolean {\r\n    let bestPlayer = true;\r\n    this.players.filter(p => !p.win).forEach(player => {\r\n      bestPlayer = bestPlayer && actPlayer.score >= player.score;\r\n    });\r\n    return bestPlayer;\r\n  }\r\n\r\n  isTheWorstPlayer(actPlayer: Player): boolean {\r\n    let lastPlayer = true;\r\n    this.players.filter(p => !p.win).forEach(player => {\r\n      lastPlayer = lastPlayer && actPlayer.score <= player.score;\r\n    });\r\n    return lastPlayer;\r\n  }\r\n\r\n  nextRound(): void {\r\n    this.round++;\r\n  }\r\n\r\n  resetScore(): void {\r\n    this.players.forEach(player => player.reset());\r\n    this.actualPlayerIndex = 0;\r\n    this.actualThrow = 0;\r\n    this.round = 0;\r\n  }\r\n\r\n  rotatePlayers(): void {\r\n    this.players.push(this.players.shift());\r\n  }\r\n\r\n  clone(): GameService {\r\n    const game = new GameService();\r\n    game.actualPlayerIndex = this.actualPlayerIndex;\r\n    game.actualThrow = this.actualThrow;\r\n    game.round = this.round;\r\n    const players: Player[] = [];\r\n    this.players.forEach(player => {\r\n      players.push(player.clone());\r\n    });\r\n    game.players = players;\r\n    return game;\r\n  }\r\n\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {FormsModule} from '@angular/forms';\r\nimport {CommonModule} from '@angular/common';\r\nimport {MaterialModule} from '../material.module';\r\nimport {DialogComponent} from '~components/dialog/dialog.component';\r\nimport {GameToolbarComponent} from '~components/game-toolbar/game-toolbar.component';\r\nimport {NumberPlateComponent} from '~components/number-plate/number-plate.component';\r\nimport {PlayerSettingsComponent} from '~components/player-settings/player-settings.component';\r\nimport {SettingsComponent} from '~components/settings/settings.component';\r\nimport {PlayerScoreComponent} from '~components/player-score/player-score.component';\r\n\r\nconst components = [NumberPlateComponent, GameToolbarComponent,\r\n  DialogComponent, PlayerSettingsComponent, SettingsComponent, PlayerScoreComponent]\r\n\r\n@NgModule({\r\n  imports: [CommonModule, MaterialModule],\r\n  declarations: components,\r\n  exports: [CommonModule, FormsModule, MaterialModule, ...components],\r\n  entryComponents: [DialogComponent]\r\n})\r\nexport class SharedModule {\r\n}\r\n","export class Settings {\r\n\r\n  startValue = 301;\r\n  start = 1;\r\n  checkout = 1;\r\n\r\n  isNormalStart(): boolean {\r\n    return this.start === 1;\r\n  }\r\n\r\n  isDoubleStart(): boolean {\r\n    return this.start === 2;\r\n  }\r\n\r\n  isTripleStart(): boolean {\r\n    return this.start === 3;\r\n  }\r\n\r\n  isNormalCheckout(): boolean {\r\n    return this.checkout === 1;\r\n  }\r\n\r\n  isDoubleCheckout(): boolean {\r\n    return this.checkout === 2;\r\n  }\r\n\r\n  isTripleCheckout(): boolean {\r\n    return this.checkout === 3;\r\n  }\r\n\r\n  isHighScoreGame(): boolean {\r\n    return this.checkout === 4;\r\n  }\r\n\r\n  setStart(start: number) {\r\n    this.start = start;\r\n  }\r\n\r\n  setCheckout(checkout: number) {\r\n    this.checkout = checkout;\r\n  }\r\n\r\n  setStartValue(startValue: number) {\r\n    this.startValue = startValue;\r\n  }\r\n}\r\n","import {Component} from '@angular/core';\r\nimport {Settings} from './models/settings.model';\r\nimport {Playground} from '~models/playground.model';\r\nimport {GameService} from '~services/game.service';\r\nimport {Player} from '~models/player.model';\r\nimport {Router} from '@angular/router';\r\nimport {PlaygroundState} from '~models/playground-state.model';\r\nimport {DialogService} from '~services/dialog.service';\r\nimport {slideInAnimation} from '../route-animation';\r\nimport {ApplicationStateService} from '~services/application-state.service';\r\n\r\n@Component({\r\n  templateUrl: './x01.component.html',\r\n  animations: [slideInAnimation],\r\n})\r\nexport class X01Component extends Playground<PlaygroundState> {\r\n\r\n  settings: Settings;\r\n\r\n  constructor(application: ApplicationStateService, game: GameService, route: Router, dialogService: DialogService) {\r\n    super(application, game, route, dialogService);\r\n    this.settings = new Settings();\r\n  }\r\n\r\n  customReset() {\r\n    this.game.players.forEach(player => {\r\n      player.state = null;\r\n      player.score = this.settings.startValue;\r\n    });\r\n  }\r\n\r\n  calculatePoints(score: number): Promise<any> {\r\n    const player = this.game.getActualPlayer();\r\n    const actualScore = score * this.multiplier;\r\n\r\n    const validStart = !player.first || this.settings.isNormalStart()\r\n      || (player.first\r\n        && ((this.settings.isDoubleStart() && this.multiplier === 2)\r\n          || (this.settings.isTripleStart() && this.multiplier === 3)));\r\n\r\n    if (validStart) {\r\n      player.first = false;\r\n      return this.countDown(player, actualScore);\r\n    } else {\r\n      return Promise.resolve();\r\n    }\r\n  }\r\n\r\n  checkPlayerState(): Promise<any> {\r\n    const player = this.game.getActualPlayer();\r\n    let next = false;\r\n\r\n    if ((this.settings.isHighScoreGame() && player.score <= 0) ||\r\n      ((player.score === 0 && (this.settings.isNormalCheckout()\r\n        || (this.settings.isDoubleCheckout() && this.multiplier === 2)\r\n        || (this.settings.isTripleCheckout() && this.multiplier === 3))))) {\r\n      player.win = true;\r\n      next = true;\r\n    } else if (player.score <= 0\r\n      || (this.settings.isDoubleCheckout() && player.score < 2)\r\n      || (this.settings.isTripleCheckout() && player.score < 3)) {\r\n      player.throws.forEach(t => player.score += t);\r\n      next = true;\r\n      this.dialogService.openErrorDialog(`${this.game.getActualPlayer().name} busted!`);\r\n    }\r\n\r\n    if (this.game.actualThrow === 3 || next) {\r\n      this.game.nextPlayer();\r\n    }\r\n    return Promise.resolve();\r\n  }\r\n\r\n  private countDown(player: Player, score: number): Promise<any> {\r\n    return new Promise<any>((resolve) => {\r\n      const id = setInterval(() => {\r\n        if (score === 0) {\r\n          clearInterval(id);\r\n          resolve();\r\n        } else if (player.score < 0) {\r\n          player.score -= score;\r\n          score = 0;\r\n        } else {\r\n          player.score--;\r\n          score--;\r\n        }\r\n      }, 5);\r\n    });\r\n  }\r\n}\r\n","<div id=\"playgroundContent\">\r\n\r\n  <app-settings *ngIf=\"settingsOpen\" [title]=\"'X01'\" [playground]=\"playground\">\r\n\r\n    <h2>Games</h2>\r\n    <button mat-raised-button class=\"button\" [color]=\"settings.startValue===101?'primary':''\"\r\n            (click)=\"settings.setStartValue(101)\">101\r\n    </button>\r\n    <button mat-raised-button class=\"button\" [color]=\"settings.startValue===201?'primary':''\"\r\n            (click)=\"settings.setStartValue(201)\">201\r\n    </button>\r\n    <button mat-raised-button class=\"button\" [color]=\"settings.startValue===301?'primary':''\"\r\n            (click)=\"settings.setStartValue(301)\">301\r\n    </button>\r\n    <button mat-raised-button class=\"button\" [color]=\"settings.startValue===501?'primary':''\"\r\n            (click)=\"settings.setStartValue(501)\">501\r\n    </button>\r\n    <button mat-raised-button class=\"button\" [color]=\"settings.startValue===701?'primary':''\"\r\n            (click)=\"settings.setStartValue(701)\">701\r\n    </button>\r\n    <button mat-raised-button class=\"button\" [color]=\"settings.startValue===901?'primary':''\"\r\n            (click)=\"settings.setStartValue(901)\">901\r\n    </button>\r\n    <mat-divider></mat-divider>\r\n\r\n    <h2>Check In</h2>\r\n    <button mat-raised-button class=\"button shortmedium\" [color]=\"settings.start===1?'primary':''\"\r\n            (click)=\"settings.setStart(1)\">Single\r\n    </button>\r\n    <button mat-raised-button class=\"button shortmedium\" [color]=\"settings.start===2?'primary':''\"\r\n            (click)=\"settings.setStart(2)\">Double\r\n    </button>\r\n    <button mat-raised-button class=\"button shortmedium\" [color]=\"settings.start===3?'primary':''\"\r\n            (click)=\"settings.setStart(3)\">Triple\r\n    </button>\r\n    <mat-divider></mat-divider>\r\n\r\n    <h2>Check Out</h2>\r\n    <button mat-raised-button class=\"button shortmedium\" [color]=\"settings.checkout===1?'primary':''\"\r\n            (click)=\"settings.setCheckout(1)\">Single\r\n    </button>\r\n    <button mat-raised-button class=\"button shortmedium\" [color]=\"settings.checkout===2?'primary':''\"\r\n            (click)=\"settings.setCheckout(2)\">Double\r\n    </button>\r\n    <button mat-raised-button class=\"button shortmedium\" [color]=\"settings.checkout===3?'primary':''\"\r\n            (click)=\"settings.setCheckout(3)\">Triple\r\n    </button>\r\n    <button mat-raised-button class=\"button shortmedium\" [color]=\"settings.checkout===4?'primary':''\"\r\n            (click)=\"settings.setCheckout(4)\">None\r\n    </button>\r\n\r\n    <mat-divider></mat-divider>\r\n    <button mat-raised-button class=\"button medium\" [color]=\"game.victoryFirst?'primary':''\" (click)=\"game.toggleVictoryFirst()\">\r\n      Victory First\r\n    </button>\r\n\r\n  </app-settings>\r\n\r\n  <div class=\"side-left\">\r\n    <app-game-toolbar [playground]=\"playground\" *ngIf=\"!settingsOpen\"></app-game-toolbar>\r\n    <ng-container *ngIf=\"!settingsOpen\">\r\n      <div class=\"player {{(i === game.actualPlayerIndex) ? 'highlighted' : ''}}\"\r\n           *ngFor=\"let player of game.players; let i = index\">\r\n        <app-player-score [player]=\"player\" [hasContent]=\"false\"></app-player-score>\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n  <app-number-plate [playground]=\"playground\" *ngIf=\"!settingsOpen\"></app-number-plate>\r\n</div>\r\n","import {NgModule} from '@angular/core';\r\nimport {RouterModule} from '@angular/router';\r\nimport {X01Component} from './x01.component';\r\nimport {SharedModule} from '../shared/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    RouterModule.forChild([\r\n      {path: '', component: X01Component}\r\n    ])\r\n  ],\r\n  declarations: [X01Component]\r\n})\r\nexport class X01Module {\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"]}